/*********************************************************************************************************************
* COPYRIGHT NOTICE
* Copyright (c) 2018,逐飞科技
* All rights reserved.
* 技术讨论QQ群：一群：179029047(已满)  二群：244861897
*
* 以下所有内容版权均属逐飞科技所有，未经允许不得用于商业用途，
* 欢迎各位使用并传播本程序，修改内容时必须保留逐飞科技的版权声明。
*
* @file				SEEKFREE_IIC.h
* @company			成都逐飞科技有限公司
* @author			逐飞科技(QQ3184284598)
* @version			查看doc内version文件 版本说明
* @Software			IAR 8.32.4 or MDK 5.28
* @Taobao			https://seekfree.taobao.com/
* @date				2020-11-23
* @note
* 					接线定义：
* 					------------------------------------
* 					模块管脚			单片机管脚
* 					SCL					查看 SEEKFREE_SCL 宏定义
* 					SDA					查看 SEEKFREE_SDA 宏定义
* 					------------------------------------
********************************************************************************************************************/

#ifndef _IST8310_IIC_h
#define _IST8310_IIC_h

#include "common.h"

#include "zf_gpio.h"
#include "zf_systick.h"

// 软件 IIC 定义
#define SEEKFREE_SCL_IST	E3															// 定义SCL引脚  可任意更改为其他IO
#define SEEKFREE_SDA_IST	E4															// 定义SDA引脚  可任意更改为其他IO

#define SDA_IST				((gpio_group[(SEEKFREE_SDA_IST&0xf0)>>4]->IDR & (((uint16_t)0x0001) << (SEEKFREE_SDA_IST&0x0f)))?1:0)
#define SDA0_IST()			GPIO_PIN_RESET (SEEKFREE_SDA_IST)								// IO口输出低电平
#define SDA1_IST()			GPIO_PIN_SET (SEEKFREE_SDA_IST)									// IO口输出高电平
#define SCL0_IST()			GPIO_PIN_RESET (SEEKFREE_SCL_IST)								// IO口输出低电平
#define SCL1_IST()			GPIO_PIN_SET (SEEKFREE_SCL_IST)									// IO口输出高电平
//#define DIR_OUT()		gpio_dir(SEEKFREE_SDA, GPO, GPO_PUSH_PULL)					// 输出方向
//#define DIR_IN()		gpio_dir(SEEKFREE_SDA, GPI, GPO_PUSH_PULL)					// 输入方向

#define SEEKFREE_ACK_IST	1															// 主应答
#define SEEKFREE_NACK_IST	0															// 从应答

typedef enum IIC_IST																// IIC 模块
{
	SIMIIC_IST,
	SCCB_IST
} IIC_type_IST;

//void	simiic_delay_set		(uint16 time);
//void	simiic_ack_main			(uint8 ack_main);
void	simiic_write_reg_IST		(uint8 dev_add, uint8 reg, uint8 dat);
void	simiic_write_regs_IST		(uint8 dev_add, uint8 reg, uint8 *dat, uint8 num);
uint8	simiic_read_reg_IST			(uint8 dev_add, uint8 reg, IIC_type_IST type);
void	simiic_read_regs_IST		(uint8 dev_add, uint8 reg, uint8 *dat_add, uint8 num, IIC_type_IST type);
void	simiic_init_IST				(void);

#endif
